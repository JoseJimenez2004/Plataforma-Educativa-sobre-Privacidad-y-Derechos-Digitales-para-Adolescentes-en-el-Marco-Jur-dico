/* ==========================================================================
   ESTILOS DE FORMULARIOS
   Componentes específicos para formularios y controles de entrada
   ========================================================================== */

/* Contenedores de Formulario */
.form-container {
    @apply max-w-4xl mx-auto;
}

.form-section {
    @apply mb-8;
}

.form-group {
    @apply mb-6;
}

.form-row {
    @apply grid grid-cols-1 md:grid-cols-2 gap-6;
}

.form-col-full {
    @apply md:col-span-2;
}

/* Etiquetas y Texto de Ayuda */
.form-label {
    @apply block text-sm font-medium text-gray-700 mb-2;
}

.form-label-required::after {
    content: '*';
    @apply ml-1 text-red-500;
}

.form-helper-text {
    @apply text-sm text-gray-500 mt-1;
}

.form-error-text {
    @apply text-sm text-red-600 mt-1;
}

.form-success-text {
    @apply text-sm text-green-600 mt-1;
}

/* Campos de Entrada Básicos */
.form-input {
    @apply block w-full px-4 py-3 border border-gray-300 rounded-lg 
           placeholder-gray-400 focus:outline-none focus:ring-2 
           focus:ring-blue-500 focus:border-transparent 
           transition duration-200;
}

.form-input-sm {
    @apply px-3 py-2 text-sm;
}

.form-input-lg {
    @apply px-4 py-4 text-lg;
}

/* Estados de Campos */
.form-input:disabled {
    @apply opacity-50 cursor-not-allowed bg-gray-50;
}

.form-input-error {
    @apply border-red-500 focus:ring-red-500 focus:border-transparent;
}

.form-input-success {
    @apply border-green-500 focus:ring-green-500 focus:border-transparent;
}

.form-input-warning {
    @apply border-yellow-500 focus:ring-yellow-500 focus:border-transparent;
}

/* Textarea */
.form-textarea {
    @apply form-input resize-vertical min-h-24;
}

.form-textarea-sm {
    @apply min-h-20;
}

.form-textarea-lg {
    @apply min-h-32;
}

/* Select */
.form-select {
    @apply form-input pr-10 bg-white;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    print-color-adjust: exact;
}

.form-select-multiple {
    @apply form-select;
    background-image: none;
}

/* Checkboxes y Radios */
.form-checkbox-group {
    @apply space-y-3;
}

.form-radio-group {
    @apply space-y-3;
}

.form-checkbox,
.form-radio {
    @apply sr-only;
}

.form-checkbox-label,
.form-radio-label {
    @apply relative flex items-start cursor-pointer;
}

.form-checkbox-custom,
.form-radio-custom {
    @apply flex items-center h-5;
}

.form-checkbox-box {
    @apply h-4 w-4 text-blue-600 border-gray-300 rounded 
           focus:ring-blue-500 transition duration-200;
}

.form-radio-circle {
    @apply h-4 w-4 text-blue-600 border-gray-300 
           focus:ring-blue-500 transition duration-200;
}

.form-checkbox-text,
.form-radio-text {
    @apply ml-3 text-sm font-medium text-gray-700;
}

.form-checkbox-description,
.form-radio-description {
    @apply ml-3 text-sm text-gray-500;
}

/* Estados de Checkbox y Radio */
.form-checkbox:checked + .form-checkbox-box {
    @apply bg-blue-600 border-blue-600;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

.form-radio:checked + .form-radio-circle {
    @apply bg-blue-600 border-blue-600;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
}

.form-checkbox:focus + .form-checkbox-box,
.form-radio:focus + .form-radio-circle {
    @apply ring-2 ring-blue-500 ring-offset-2;
}

/* Grupos de Botones (Checkbox/Radio como botones) */
.form-button-group {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3;
}

.form-button-option {
    @apply relative;
}

.form-button-input {
    @apply sr-only;
}

.form-button-label {
    @apply flex flex-col items-center justify-center p-4 border-2 border-gray-300 
           rounded-lg cursor-pointer transition-all duration-200 
           hover:border-blue-300 hover:bg-blue-50;
}

.form-button-input:checked + .form-button-label {
    @apply border-blue-500 bg-blue-50 ring-2 ring-blue-500;
}

.form-button-input:focus + .form-button-label {
    @apply ring-2 ring-blue-500 ring-offset-2;
}

.form-button-icon {
    @apply w-8 h-8 mb-2 text-gray-400;
}

.form-button-input:checked + .form-button-label .form-button-icon {
    @apply text-blue-600;
}

.form-button-text {
    @apply text-sm font-medium text-gray-900 text-center;
}

.form-button-description {
    @apply text-xs text-gray-500 text-center mt-1;
}

/* Campos con Iconos */
.form-input-with-icon {
    @apply relative;
}

.form-input-icon {
    @apply absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none;
}

.form-input-icon svg {
    @apply h-5 w-5 text-gray-400;
}

.form-input-with-icon .form-input {
    @apply pl-10;
}

.form-input-with-icon-right {
    @apply relative;
}

.form-input-icon-right {
    @apply absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none;
}

.form-input-with-icon-right .form-input {
    @apply pr-10;
}

/* Campos con Acciones */
.form-input-with-action {
    @apply relative;
}

.form-input-action {
    @apply absolute inset-y-0 right-0 pr-3 flex items-center;
}

.form-input-with-action .form-input {
    @apply pr-16;
}

/* Grupos de Campos (Input Groups) */
.form-input-group {
    @apply flex rounded-lg shadow-sm;
}

.form-input-group .form-input {
    @apply rounded-none flex-1 min-w-0;
}

.form-input-group .form-input:first-child {
    @apply rounded-l-lg;
}

.form-input-group .form-input:last-child {
    @apply rounded-r-lg;
}

.form-input-group-addon {
    @apply inline-flex items-center px-3 border border-gray-300 bg-gray-50 
           text-gray-500 sm:text-sm;
}

.form-input-group-addon:first-child {
    @apply rounded-l-lg border-r-0;
}

.form-input-group-addon:last-child {
    @apply rounded-r-lg border-l-0;
}

/* Campos de Archivo */
.form-file-input {
    @apply sr-only;
}

.form-file-label {
    @apply flex justify-center px-6 py-8 border-2 border-gray-300 
           border-dashed rounded-lg cursor-pointer transition duration-200 
           hover:border-blue-400 hover:bg-blue-50;
}

.form-file-label.dragover {
    @apply border-blue-400 bg-blue-50;
}

.form-file-content {
    @apply text-center;
}

.form-file-icon {
    @apply mx-auto h-12 w-12 text-gray-400 mb-4;
}

.form-file-text {
    @apply text-sm font-medium text-gray-900 mb-2;
}

.form-file-description {
    @apply text-xs text-gray-500;
}

.form-file-button {
    @apply inline-flex items-center px-3 py-1.5 border border-gray-300 
           rounded-md text-sm font-medium text-gray-700 bg-white 
           hover:bg-gray-50 focus:outline-none focus:ring-2 
           focus:ring-blue-500 focus:border-blue-500 transition duration-200;
}

/* Lista de Archivos */
.form-file-list {
    @apply mt-4 space-y-3;
}

.form-file-item {
    @apply flex items-center justify-between p-3 bg-gray-50 rounded-lg border;
}

.form-file-info {
    @apply flex items-center space-x-3;
}

.form-file-icon-small {
    @apply w-8 h-8 text-gray-400;
}

.form-file-details {
    @apply flex-1 min-w-0;
}

.form-file-name {
    @apply text-sm font-medium text-gray-900 truncate;
}

.form-file-meta {
    @apply text-xs text-gray-500;
}

.form-file-remove {
    @apply text-red-500 hover:text-red-700 transition duration-200;
}

/* Rango (Range) */
.form-range {
    @apply w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer;
}

.form-range::-webkit-slider-thumb {
    @apply appearance-none w-4 h-4 bg-blue-600 rounded-full 
           cursor-pointer transition duration-200;
}

.form-range::-moz-range-thumb {
    @apply w-4 h-4 bg-blue-600 rounded-full border-0 
           cursor-pointer transition duration-200;
}

.form-range:focus::-webkit-slider-thumb {
    @apply ring-2 ring-blue-500 ring-offset-2;
}

.form-range:focus::-moz-range-thumb {
    @apply ring-2 ring-blue-500 ring-offset-2;
}

/* Contadores y Medidores */
.form-counter {
    @apply flex items-center justify-between text-sm text-gray-500 mt-1;
}

.form-counter-warning {
    @apply text-yellow-600;
}

.form-counter-error {
    @apply text-red-600;
}

/* Campos de Fecha y Hora */
.form-date-input,
.form-time-input {
    @apply form-input;
}

.form-datetime-group {
    @apply grid grid-cols-1 md:grid-cols-2 gap-4;
}

/* Campos de Búsqueda */
.form-search {
    @apply relative;
}

.form-search-input {
    @apply form-input pl-10;
}

.form-search-icon {
    @apply absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none;
}

.form-search-icon svg {
    @apply h-5 w-5 text-gray-400;
}

/* Estados de Validación */
.form-validation {
    @apply mt-2 text-sm;
}

.form-validation-error {
    @apply text-red-600;
}

.form-validation-success {
    @apply text-green-600;
}

.form-validation-warning {
    @apply text-yellow-600;
}

/* Campos con Prefijo/Sufijo */
.form-input-prefix,
.form-input-suffix {
    @apply inline-flex items-center px-3 border border-gray-300 
           bg-gray-50 text-gray-500 sm:text-sm;
}

.form-input-prefix {
    @apply rounded-l-lg border-r-0;
}

.form-input-suffix {
    @apply rounded-r-lg border-l-0;
}

/* Campos de Color */
.form-color-input {
    @apply h-10 w-10 rounded border border-gray-300 cursor-pointer;
}

.form-color-input::-webkit-color-swatch {
    @apply border-0 rounded;
}

.form-color-input::-moz-color-swatch {
    @apply border-0 rounded;
}

/* Campos de Rating */
.form-rating {
    @apply flex space-x-1;
}

.form-rating-input {
    @apply sr-only;
}

.form-rating-label {
    @apply cursor-pointer text-gray-300 transition duration-200 
           hover:text-yellow-400;
}

.form-rating-input:checked ~ .form-rating-label {
    @apply text-yellow-400;
}

.form-rating-label:hover ~ .form-rating-label {
    @apply text-yellow-400;
}

.form-rating-star {
    @apply w-6 h-6;
}

/* Steps y Progreso de Formulario */
.form-steps {
    @apply flex items-center justify-between mb-8;
}

.form-step {
    @apply flex items-center;
}

.form-step-number {
    @apply flex items-center justify-center w-8 h-8 rounded-full 
           text-sm font-semibold transition duration-200;
}

.form-step-active .form-step-number {
    @apply bg-blue-600 text-white;
}

.form-step-completed .form-step-number {
    @apply bg-green-600 text-white;
}

.form-step-pending .form-step-number {
    @apply bg-gray-200 text-gray-600;
}

.form-step-line {
    @apply flex-1 h-0.5 bg-gray-200 mx-4;
}

.form-step-completed .form-step-line {
    @apply bg-green-600;
}

.form-step-label {
    @apply text-sm font-medium mt-2;
}

.form-step-active .form-step-label {
    @apply text-blue-600;
}

.form-step-completed .form-step-label {
    @apply text-green-600;
}

.form-step-pending .form-step-label {
    @apply text-gray-500;
}

/* Barras de Progreso */
.form-progress {
    @apply w-full bg-gray-200 rounded-full h-2 mb-6;
}

.form-progress-bar {
    @apply h-2 rounded-full bg-blue-600 transition-all duration-500;
}

/* Campos Dinámicos (Array) */
.form-array {
    @apply space-y-4;
}

.form-array-item {
    @apply flex items-start space-x-4 p-4 border border-gray-200 rounded-lg;
}

.form-array-content {
    @apply flex-1;
}

.form-array-actions {
    @apply flex items-center space-x-2;
}

.form-array-add {
    @apply flex justify-center p-4 border-2 border-dashed border-gray-300 
           rounded-lg cursor-pointer transition duration-200 
           hover:border-blue-400 hover:bg-blue-50;
}

/* Campos con Autocompletado */
.form-autocomplete {
    @apply relative;
}

.form-autocomplete-list {
    @apply absolute z-10 w-full mt-1 bg-white border border-gray-300 
           rounded-lg shadow-lg max-h-60 overflow-auto;
}

.form-autocomplete-item {
    @apply px-4 py-2 cursor-pointer hover:bg-gray-50 transition duration-150;
}

.form-autocomplete-item.active {
    @apply bg-blue-50 text-blue-900;
}

/* Campos con Tags */
.form-tags {
    @apply flex flex-wrap gap-2 p-2 border border-gray-300 rounded-lg 
           min-h-12 items-center;
}

.form-tag {
    @apply inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 
           text-sm rounded-md;
}

.form-tag-remove {
    @apply ml-1 text-blue-600 hover:text-blue-800 cursor-pointer;
}

.form-tags-input {
    @apply flex-1 min-w-0 border-0 focus:ring-0 focus:outline-none 
           px-1 py-1 text-sm;
}

/* Responsive Design */
@media (max-width: 640px) {
    .form-row {
        @apply grid-cols-1;
    }
    
    .form-button-group {
        @apply grid-cols-1;
    }
    
    .form-array-item {
        @apply flex-col space-x-0 space-y-4;
    }
    
    .form-array-actions {
        @apply justify-end;
    }
    
    .form-steps {
        @apply flex-col space-y-4;
    }
    
    .form-step {
        @apply w-full justify-start;
    }
    
    .form-step-line {
        @apply hidden;
    }
}

/* Estados de Focus Mejorados */
.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    @apply ring-2 ring-blue-500 ring-opacity-50;
}

/* Estados de Hover */
.form-input:not(:disabled):hover {
    @apply border-gray-400;
}

.form-checkbox-label:hover .form-checkbox-box,
.form-radio-label:hover .form-radio-circle {
    @apply border-gray-400;
}

/* Utilidades de Formulario */
.form-required {
    @apply text-red-500 ml-1;
}

.form-optional {
    @apply text-gray-400 text-sm ml-1;
}

.form-fieldset {
    @apply border border-gray-200 rounded-lg p-6;
}

.form-legend {
    @apply text-lg font-semibold text-gray-900 px-2;
}

/* Soporte para Modo Oscuro (Opcional) */
@media (prefers-color-scheme: dark) {
    .form-input,
    .form-select,
    .form-textarea {
        @apply bg-gray-700 border-gray-600 text-white placeholder-gray-400 
               focus:ring-blue-400 focus:border-blue-400;
    }
    
    .form-label {
        @apply text-gray-300;
    }
    
    .form-helper-text {
        @apply text-gray-400;
    }
    
    .form-checkbox-text,
    .form-radio-text {
        @apply text-gray-300;
    }
    
    .form-checkbox-description,
    .form-radio-description {
        @apply text-gray-400;
    }
    
    .form-button-label {
        @apply border-gray-600 text-gray-300 hover:border-blue-400 hover:bg-blue-900;
    }
    
    .form-file-label {
        @apply border-gray-600 hover:border-blue-400 hover:bg-blue-900;
    }
    
    .form-file-item {
        @apply bg-gray-700 border-gray-600;
    }
    
    .form-file-name {
        @apply text-gray-300;
    }
}

/* Animaciones de Formulario */
@keyframes formShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.form-shake {
    animation: formShake 0.5s ease-in-out;
}

@keyframes formPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.form-pulse {
    animation: formPulse 2s infinite;
}

/* Estados de Carga en Campos */
.form-input-loading {
    @apply relative;
}

.form-input-loading::after {
    content: '';
    @apply absolute right-3 top-1/2 transform -translate-y-1/2 
           w-4 h-4 border-2 border-gray-300 border-t-blue-600 
           rounded-full animate-spin;
}

/* Campos con Validación en Tiempo Real */
.form-input-validating {
    @apply border-yellow-300 bg-yellow-50;
}

/* Utilidades para Formularios Largos */
.form-scroll-container {
    @apply max-h-96 overflow-y-auto pr-4;
}

.form-scroll-container::-webkit-scrollbar {
    @apply w-2;
}

.form-scroll-container::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded;
}

.form-scroll-container::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded;
}

.form-scroll-container::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
}